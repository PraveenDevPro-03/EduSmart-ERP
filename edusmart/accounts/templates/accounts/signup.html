{% extends 'base.html' %}
{% load static %}

{% block title %}Sign Up - EduSmart ERP{% endblock %}
{% block header %}Create Your Account{% endblock %}

{% block content %}
<div class="min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-100 via-purple-100 to-blue-200 py-12">
    <div class="bg-white max-w-4xl w-full mx-4 rounded-2xl shadow-2xl p-8 animate-fade-in-up">
        <h2 class="text-3xl font-extrabold text-center text-gray-800 mb-8 animate-slide-in-left">Join EduSmart ERP</h2>
        <form method="POST" enctype="multipart/form-data" class="space-y-6">
            {% csrf_token %}
            {% if form.errors %}
                <div class="bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-lg animate-pulse">
                    {% for field in form %}
                        {% for error in field.errors %}
                            <p class="text-sm">{{ field.label }}: {{ error }}</p>
                        {% endfor %}
                    {% endfor %}
                    {% for error in form.non_field_errors %}
                        <p class="text-sm">{{ error }}</p>
                    {% endfor %}
                </div>
            {% endif %}
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label for="username" class="block text-sm font-medium text-gray-700">Username</label>
                    <input type="text" id="username" name="username" class="mt-1 p-3 w-full border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200" required>
                </div>
                <div>
                    <label for="email" class="block text-sm font-medium text-gray-700">Email</label>
                    <input type="email" id="email" name="email" class="mt-1 p-3 w-full border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200" required>
                </div>
                <div>
                    <label for="password1" class="block text-sm font-medium text-gray-700">Password</label>
                    <input type="password" id="password1" name="password1" class="mt-1 p-3 w-full border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200" required>
                </div>
                <div>
                    <label for="password2" class="block text-sm font-medium text-gray-700">Confirm Password</label>
                    <input type="password" id="password2" name="password2" class="mt-1 p-3 w-full border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200" required>
                </div>
                <div>
                    <label for="user_type" class="block text-sm font-medium text-gray-700">Role</label>
                    <select id="user_type" name="user_type" class="mt-1 p-3 w-full border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200" required>
                        <option value="student">Student</option>
                        <option value="teacher">Teacher</option>
                        <option value="admin">Admin</option>
                    </select>
                </div>
                <div id="roll_number_field" class="field-hidden">
                    <label for="roll_number" class="block text-sm font-medium text-gray-700">Roll Number</label>
                    <input type="text" id="roll_number" name="roll_number" class="mt-1 p-3 w-full border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200">
                </div>
                <div id="department_field" class="field-hidden">
                    <label for="department" class="block text-sm font-medium text-gray-700">Department</label>
                    <input type="text" id="department" name="department" class="mt-1 p-3 w-full border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200">
                </div>
                <div id="designation_field" class="field-hidden">
                    <label for="designation" class="block text-sm font-medium text-gray-700">Designation</label>
                    <input type="text" id="designation" name="designation" class="mt-1 p-3 w-full border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200">
                </div>
                <div id="course_field" class="field-hidden">
                    <label for="course" class="block text-sm font-medium text-gray-700">Course</label>
                    <input type="text" id="course" name="course" class="mt-1 p-3 w-full border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200">
                </div>
                <div id="branch_field" class="field-hidden">
                    <label for="branch" class="block text-sm font-medium text-gray-700">Branch</label>
                    <input type="text" id="branch" name="branch" class="mt-1 p-3 w-full border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200">
                </div>
                <div id="admin_token_field" class="field-hidden">
                    <label for="admin_token" class="block text-sm font-medium text-gray-700">Admin Invite Token</label>
                    <input type="text" id="admin_token" name="admin_token" class="mt-1 p-3 w-full border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200">
                </div>
            </div>
            <div class="grid grid-cols-1 gap-6">
                <div>
                    <label for="profile_picture" class="block text-sm font-medium text-gray-700">Profile Picture</label>
                    <input type="file" id="profile_picture" name="profile_picture" class="mt-1 p-3 w-full border border-gray-300 rounded-lg text-sm">
                </div>
                <div>
                    <label for="bio" class="block text-sm font-medium text-gray-700">Bio</label>
                    <textarea id="bio" name="bio" class="mt-1 p-3 w-full border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200" rows="4"></textarea>
                </div>
            </div>
            <button type="submit" class="w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-3 rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-300 transform hover:scale-105 shadow-lg">Sign Up</button>
        </form>
        <p class="mt-6 text-sm text-gray-600 text-center">
            Already have an account? <a href="{% url 'accounts:login' %}" class="text-blue-600 hover:text-blue-800 font-medium">Log In</a>
        </p>
    </div>
</div>
{% endblock %}